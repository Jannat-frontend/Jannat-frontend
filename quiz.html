<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jannat Foundation Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="bg-blue-50 min-h-screen flex items-center justify-center p-4 select-none" oncontextmenu="return false" oncopy="return false" oncut="return false" onpaste="return false">

  <div class="w-full max-w-md bg-white rounded-2xl shadow-lg p-6">
    <div id="quiz-container" class="text-center space-y-4">
      <h1 class="text-2xl font-bold text-blue-700 mb-4">Jannat Foundation Quiz</h1>
      <p class="text-gray-600">Please log in to continue.</p>
      <a href="login.html" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-xl font-semibold transition">Login to Start Quiz</a>
    </div>
  </div>

  <audio id="correct-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="wrong-sound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>

 <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
const backendURL = "https://jannat-backend.onrender.com";

    const questions = [
      { question: "Consider the following statements regarding impeachment of the President...", options: ["1 and 2 only", "1 and 3 only", "2 only", "1, 2 and 3"], answer: "2 only" },
      { question: "Recently, the government approved construction of the longest bridge connecting Dhubri and Phulbari...", options: ["Bandra-Worli Sea Link", "Bogibeel Bridge", "Patna-Hajipur Mahatma Gandhi Setu", "Dhola Sadiya Bhupen Hazarika Setu"], answer: "Dhola Sadiya Bhupen Hazarika Setu" },
      { question: "With respect to the national freedom movement, consider the following statements about Phoenix Settlement...", options: ["1 only", "2 only", "Both 1 and 2", "Neither 1 nor 2"], answer: "1 only" },
      { question: "Consider the following: 1. Nuclear Command Authority 2. CSIR 3. NDMA 4. DAE...", options: ["1,2,3 only", "2 and 4 only", "1,3 and 4 only", "1,2,3 and 4"], answer: "1,2,3 and 4" },
      { question: "Section 69 of the Information Technology Act, 2000, recently seen in the news is related to:", options: ["Power to issue directions", "Punishment for offensive messages", "Protected system declaration", "CERT-IN cyber security"], answer: "Power to issue directions" }
    ];

let quizSet = [], currentQuestion = 0, score = 0;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function showQuestion() {
  if (currentQuestion >= quizSet.length) {
    document.getElementById("quiz-box").innerHTML = `
      <div class="text-green-600 font-bold">✅ Quiz Completed!</div>
      <div class="text-lg">Your Score: ${score}/${quizSet.length}</div>
      <div class="text-sm mt-2 text-gray-500">Thanks for participating!</div>
      <a href="index.html" class="text-blue-500 underline">← Go Home</a>
    `;
    return;
  }

  const q = quizSet[currentQuestion];
  document.getElementById("quiz-box").innerHTML = `
    <div class="font-semibold text-left">Q${currentQuestion + 1}: ${q.question}</div>
    <div id="options" class="space-y-2"></div>
  `;

  const optionsBox = document.getElementById("options");
  q.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "w-full bg-gray-100 hover:bg-blue-100 py-2 px-3 rounded text-left transition";
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(btn, q.answer);
    optionsBox.appendChild(btn);
  });
}

const data = await res.json();
  const razorpay = new Razorpay({
    key: "rzp_live_kpI99b9cX5iTdu",  // Replace with your test key
    amount: data.amount,
    currency: data.currency,
    order_id: data.id,
    handler: function () {
      document.getElementById("pay-now").classList.add("hidden");
      document.getElementById("start-quiz").classList.remove("hidden");
      document.getElementById("quiz-box").innerText = "Click 'Start Quiz' to begin!";
    }
  });
  razorpay.open();
};
function checkAnswer(button, correct) {
  const allBtns = document.querySelectorAll("#options button");
  allBtns.forEach(btn => {
    btn.disabled = true;
    if (btn.innerText === correct) {
      btn.classList.add("bg-green-200", "text-green-700", "font-bold");
    } else {
      btn.classList.add("bg-red-200", "text-red-700");
    }
  });



  if (button.innerText === correct) {
    score++;
    document.getElementById("correct-sound").play();
  } else {
    document.getElementById("wrong-sound").play();
  }

  currentQuestion++;
  setTimeout(showQuestion, 1000);
}

document.getElementById("start-quiz").onclick = () => {
  shuffle(allQuestions);
  quizSet = allQuestions.slice(0, 5);
  currentQuestion = 0;
  score = 0;
  showQuestion();
};
      if (selected === correct) {
        score++;
        document.getElementById("correct-sound").play();
      } else {
        document.getElementById("wrong-sound").play();
      }

      currentQuestion++;
      setTimeout(showQuestion, 1000);
    }
  </script>
</body>
</html>
